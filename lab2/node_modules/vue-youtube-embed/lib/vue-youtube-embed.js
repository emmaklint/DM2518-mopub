/*! Vue YouTube Embed version 0.3.3 under MIT License copyright 2016 kaorun343 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["VueYouTubeEmbed"] = factory();
	else
		root["VueYouTubeEmbed"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

exports.getIdFromURL = getIdFromURL;
exports.getTimeFromURL = getTimeFromURL;
exports.install = install;
if (!String.prototype.includes) {
  String.prototype.includes = function () {
    'use strict';

    return String.prototype.indexOf.apply(this, arguments) !== -1;
  };
}

var youtubeRegexp = /https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/ig;
var timeRegexp = /t=(\d+)[ms]?(\d+)?s?/;

/**
 * get id from url
 * @param  {string} url url
 * @return {string}     id
 */
function getIdFromURL(url) {
  var id = url.replace(youtubeRegexp, "$1");

  if (id.includes(";")) {
    var pieces = id.split(";");

    if (pieces[1].includes("%")) {
      var uriComponent = decodeURIComponent(pieces[1]);
      id = ('http://youtube.com' + uriComponent).replace(youtubeRegexp, "$1");
    } else {
      id = pieces[0];
    }
  } else if (id.includes("#")) {
    id = id.split("#")[0];
  }

  return id;
}

/**
 * get time from url
 * @param  {string} url url
 * @return {number}     time
 */
function getTimeFromURL() {
  var url = arguments.length <= 0 || arguments[0] === undefined ? "" : arguments[0];

  var times = url.match(timeRegexp);

  if (!times) {
    return 0;
  }

  var _times = _slicedToArray(times, 3);

  var full = _times[0];
  var minutes = _times[1];
  var seconds = _times[2];


  if (typeof seconds !== "undefined") {
    seconds = parseInt(seconds, 10);
    minutes = parseInt(minutes, 10);
  } else if (full.includes("m")) {
    minutes = parseInt(minutes, 10);
    seconds = 0;
  } else {
    seconds = parseInt(minutes, 10);
    minutes = 0;
  }

  return seconds + minutes * 60;
}

var container = exports.container = {
  scripts: [],

  run: function run() {
    var _this = this;

    this.scripts.forEach(function (callback) {
      callback(_this.YT);
    });
    this.scripts = [];
  },
  register: function register(callback) {
    var _this2 = this;

    if (this.YT) {
      this.Vue.nextTick(function () {
        callback(_this2.YT);
      });
    } else {
      this.scripts.push(callback);
    }
  }
};

var events = exports.events = {
  READY: 'youtube:player:ready',
  ENDED: 'youtube:player:ended',
  PLAYING: 'youtube:player:playing',
  PAUSED: 'youtube:player:paused',
  BUFFERING: 'youtube:player:buffering',
  QUEUED: 'youtube:player:queued',
  ERROR: 'youtube:player:error'
};

var _events = {
  0: events.ENDED,
  1: events.PLAYING,
  2: events.PAUSED,
  3: events.BUFFERING,
  5: events.QUEUED
};

function setSize() {
  var _params = this.params;
  var _params$width = _params.width;
  var width = _params$width === undefined ? '640' : _params$width;
  var _params$height = _params.height;
  var height = _params$height === undefined ? '390' : _params$height;

  this.player.setSize(width, height);
}

var pid = 0;

var YouTubePlayer = exports.YouTubePlayer = {
  params: ['width', 'height', 'player-vars'],
  paramWatchers: {
    width: setSize,
    height: setSize
  },
  bind: function bind() {
    this.el.id = this.el.id || 'v-youtube-player-' + pid;
    pid += 1;
    this.player = null;
  },
  update: function update(videoId) {
    var _this3 = this;

    var start = 0;
    if (this.modifiers.url) {
      start = getTimeFromURL(videoId);
      videoId = getIdFromURL(videoId);
    }

    if (this.player === null) {
      container.register(function (YouTube) {
        var _params2 = _this3.params;
        var _params2$width = _params2.width;
        var width = _params2$width === undefined ? '640' : _params2$width;
        var _params2$height = _params2.height;
        var height = _params2$height === undefined ? '390' : _params2$height;
        var _params2$playerVars = _params2.playerVars;
        var playerVars = _params2$playerVars === undefined ? {} : _params2$playerVars;

        playerVars.start = playerVars.start || start;
        var vm = _this3.vm;
        _this3.player = new YouTube.Player(_this3.el.id, {
          width: width,
          height: height,
          videoId: videoId,
          playerVars: playerVars,
          events: {
            onReady: function onReady(event) {
              vm.$emit(events.READY, event.target);
            },
            onStateChange: function onStateChange(event) {
              if (event.data !== -1) {
                vm.$emit(_events[event.data], event.target);
              }
            },
            onError: function onError(event) {
              vm.$emit(events.ERROR, event.target);
            }
          }
        });
      });
    } else {
      var _params$playerVars = this.params.playerVars;
      var playerVars = _params$playerVars === undefined ? { autoplay: 0 } : _params$playerVars;

      var name = (playerVars.autoplay ? 'load' : 'cue') + 'VideoById';
      this.player[name](videoId);
    }
  },
  unbind: function unbind() {
    if (this.player != null) {
      this.player.destroy();
    }
    delete this.player;
  }
};

function install(Vue) {
  container.Vue = Vue;
  Vue.directive('youtube', YouTubePlayer);
  Vue.prototype.$youtube = { getIdFromURL: getIdFromURL, getTimeFromURL: getTimeFromURL };

  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/player_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  window.onYouTubeIframeAPIReady = function () {
    container.YT = YT;
    container.run();
  };
}

exports.default = {
  getIdFromURL: getIdFromURL, getTimeFromURL: getTimeFromURL, YouTubePlayer: YouTubePlayer, install: install
};

/***/ }
/******/ ])
});
;